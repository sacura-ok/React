(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(30)},,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(9),i=n.n(s),o=n(2),c=n(3),u=n(5),l=n(4),p=n(6),m=n(10),d=n(1),v=n.n(d),h=n(7),f=function(){function e(){Object(o.a)(this,e),this._apiBase="https://smktesting.herokuapp.com/api"}return Object(c.a)(e,[{key:"postRequest",value:function(){var e=Object(h.a)(v.a.mark(function e(t,n,a){var r,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Headers({Authorization:"Token "+a,"Content-Type":"application/json; charset=utf-8",Accept:"application/json"}),a||r.delete("Authorization","Token "+a),e.next=4,fetch("".concat(this._apiBase).concat(t),{method:"POST",body:JSON.stringify(n),headers:r});case 4:if((s=e.sent).ok){e.next=7;break}throw new Error("Could not fetch ".concat(t)+", received ".concat(s.status));case 7:return e.next=9,s.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getRequest",value:function(){var e=Object(h.a)(v.a.mark(function e(t,n){var a,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Headers({Authorization:"Token "+n,"Content-Type":"application/json; charset=utf-8",Accept:"application/json"}),n||a.delete("Authorization","Token "+n),e.next=4,fetch("".concat(this._apiBase).concat(t),{headers:a});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Could not fetch ".concat(t)+", received ".concat(r.status));case 7:return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"registerUser",value:function(){var e=Object(h.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.postRequest("/register/",t);case 2:return(n=e.sent).success?console.log("You are registered."):console.log(n.message),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loginUser",value:function(){var e=Object(h.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.postRequest("/login/",t);case 2:return(n=e.sent).success?console.log("You are logged in."):console.log(n.message),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"postReview",value:function(){var e=Object(h.a)(v.a.mark(function e(t,n,a){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.postRequest("/reviews/".concat(t),n,a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getProduct",value:function(){var e=Object(h.a)(v.a.mark(function e(t,n){var a,r,s,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("/products/",n);case 2:return a=e.sent,r=a.filter(function(e){return e.id===t}),s=Object(m.a)(r,1),i=s[0],e.abrupt("return",this.modelProduct(i));case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getListProducts",value:function(){var e=Object(h.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("/products/",t);case 2:return n=e.sent,e.abrupt("return",n.map(this.modelProduct));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getListReviews",value:function(){var e=Object(h.a)(v.a.mark(function e(t,n){var a,r=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRequest("/reviews/".concat(t),n);case 2:return a=e.sent,e.abrupt("return",a.map(function(e){var t=e.id,n=e.created_by.username,a=e.rate,s=e.text;return r.modelReview({id:t,username:n,rate:a,text:s})}));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"modelProduct",value:function(e){return{id:e.id,title:e.title,img:e.img,text:e.text}}},{key:"modelReview",value:function(e){return{id:e.id,username:e.username,rate:e.rate,text:e.text}}}]),e}(),w=(n(18),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).requestService=new f,n.state={username:"",password:"",message:"",success:"",token:"",showCatalog:!1,formInOut:null},n.registerUser=function(e){e.preventDefault(),n.state.username&&n.state.password?n.requestService.registerUser({username:n.state.username,password:n.state.password},n.state.token).then(function(e){n.setState({message:e.success?"You are registered!":e.message,success:e.success,token:e.token,formInOut:!0}),n.props.onClickButtonRegister(n.state.showCatalog,n.state.token)}):n.setState({message:"Username or password invalid!"})},n.signIn=function(e){e.preventDefault(),n.state.username&&n.state.password?n.requestService.loginUser({username:n.state.username,password:n.state.password},n.state.token).then(function(e){n.setState({message:e.success?"You are signed in!":e.message,success:e.success,token:e.token,formInOut:!0}),n.props.onClickButtonSignIn(n.state.showCatalog,n.state.token)}):n.setState({message:"Username or password invalid!"})},n.signOut=function(e){e.preventDefault(),n.setState({message:"",username:"",password:"",token:"",text:"",formInOut:!1}),n.props.onClickButtonSignOut(!1)},n.onSubmit=function(e){e.preventDefault()},n.userNameChange=function(e){n.setState({username:e.target.value})},n.passwordChange=function(e){n.setState({password:e.target.value})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"registration-form__message"},this.state.message),n=r.a.createElement("form",{className:"registration-form",onSubmit:this.onSubmit},r.a.createElement("input",{className:"registration-form__item registration-form__input",type:"text",placeholder:"Your name *",value:this.state.username,onChange:this.userNameChange}),r.a.createElement("input",{className:"registration-form__item registration-form__input",type:"password",placeholder:"Enter Password *",value:this.state.password,onChange:this.passwordChange}),r.a.createElement("div",{className:"registration-form__block"},r.a.createElement("button",{className:"registration-form__item registration-form__button",name:"signin",onClick:this.signIn},"Sign in"),r.a.createElement("button",{className:"registration-form__item registration-form__button",name:"register",onClick:this.registerUser},"Register")),r.a.createElement("button",{className:"view-catalog",onClick:function(){return e.props.onClickButtonViewCatalog(!0)}},"View Catalog")),a=r.a.createElement("div",{className:"registration-form__sign-out"},r.a.createElement("div",{className:"registration-form__user"},"Welcome, ",this.state.username),r.a.createElement("button",{className:"registration-form__button-out",onClick:this.signOut},"Sign out"));return r.a.createElement("div",{className:"authorization"},this.state.formInOut?a:n,this.state.message?t:null)}}]),t}(a.Component)),g=(n(20),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).requestService=new f,n.state={productsList:[]},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.requestService.getListProducts(this.props.token).then(function(t){e.setState({productsList:t})})}},{key:"listItems",value:function(e){var t=this;return e.map(function(e){var n=e.id,a=e.title;return r.a.createElement("li",{className:"list-group__item",key:n,onClick:function(){return t.props.onItemSelected(n)}},a)})}},{key:"render",value:function(){var e=this.state.productsList;if(e){var t=this.listItems(e);return r.a.createElement("ul",{className:"list-group"},t)}}}]),t}(a.Component)),k=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).requestService=new f,n.state={productsList:[]},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateProduct()}},{key:"componentDidUpdate",value:function(e){this.props.idProduct!==e.idProduct&&this.updateProduct()}},{key:"updateProduct",value:function(){var e=this,t=this.props.idProduct;t&&this.requestService.getProduct(t).then(function(t){e.setState({productsList:t})})}},{key:"render",value:function(){if(this.state.productsList){var e=this.state.productsList,t=e.title,n=e.img,a=e.text;return r.a.createElement("section",{className:"product__about"},r.a.createElement("h2",{className:"product__title"},t),r.a.createElement("div",{className:"product__details"},r.a.createElement("img",{className:"product__img",src:n,alt:""}),r.a.createElement("section",{className:"product__description description"},r.a.createElement("h3",{className:"description__title "},"Description"),r.a.createElement("p",{className:"description__text"},a))))}}}]),t}(a.Component),_=(n(22),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.reviews,t=e.username,n=e.rate,a=e.text;return r.a.createElement("div",{className:"review"},r.a.createElement("span",{className:"review__item review__rate review__rate--color"},n),r.a.createElement("span",{className:"review__item review__username"},t),r.a.createElement("span",{className:"review__item review__text"},a))}}]),t}(a.Component)),b=(n(24),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).requestService=new f,n.state={reviewsList:[],review_id:null,text:""},n.addReview=function(){var e=n.props,t=e.idProduct,a=e.token,r=n.props.rateReview;n.requestService.postReview(t,{rate:r,text:n.state.text},a).then(function(e){n.setState({review_id:e.review_id,text:""})}),n.updateReviews()},n.addReviewText=function(e){n.setState({text:e.target.value})},n.allowAddReview=function(){var e=n.listRates();return r.a.createElement("div",{className:"list-reviews__add"},r.a.createElement("ul",{className:"list-reviews__rate"},e),r.a.createElement("textarea",{className:"list-reviews__review",id:n.state.review_id,placeholder:"Type your review...",onChange:n.addReviewText,value:n.state.text}),r.a.createElement("button",{className:"list-reviews__button",onClick:n.addReview},"Submit Review"))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.updateReviews()}},{key:"componentDidUpdate",value:function(e){this.props.idProduct!==e.idProduct&&this.updateReviews()}},{key:"updateReviews",value:function(){var e=this,t=this.props,n=t.idProduct,a=t.token;n&&this.requestService.getListReviews(n,a).then(function(t){var n=t.reverse();e.setState({reviewsList:n})})}},{key:"listItems",value:function(e){return e.map(function(e){var t=e.id,n=e.username,a=e.rate,s=e.text;return r.a.createElement("li",{className:"list-group-review",key:t},r.a.createElement(_,{reviews:{username:n,rate:a,text:s}}))})}},{key:"listRates",value:function(){var e=this;return[{id:1,rate:1},{id:2,rate:2},{id:3,rate:3},{id:4,rate:4},{id:5,rate:5}].reverse().map(function(t){var n=t.id,a=t.rate;return r.a.createElement("li",{className:"list-group-item review__rate",key:n,onClick:function(){return e.props.onRateSelected(a)}},a)})}},{key:"render",value:function(){var e=this.state.reviewsList,t=this.listItems(e),n=r.a.createElement("div",{className:"list-reviews__not-allow"},"Sign in to leave a review.");return r.a.createElement("div",{className:"list-reviews"},this.props.token?this.allowAddReview():n,r.a.createElement("section",{className:"list-reviews__items"},r.a.createElement("h3",null,"Reviews"),t))}}]),t}(a.Component)),y=(n(26),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).requestService=new f,n.state={idProduct:1,rateReview:null},n.onClickProduct=function(e){n.setState({idProduct:e})},n.onClickRate=function(e){n.setState({rateReview:e})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=r.a.createElement(g,{onItemSelected:this.onClickProduct,token:this.props.token}),t=r.a.createElement(k,{idProduct:this.state.idProduct,token:this.props.token}),n=r.a.createElement(b,{idProduct:this.state.idProduct,rateReview:this.state.rateReview,onRateSelected:this.onClickRate,token:this.props.token});return r.a.createElement("main",null,e,r.a.createElement("div",{className:"product"},this.state.idProduct?t:null,this.state.idProduct?n:null))}}]),t}(a.Component)),C=(n(28),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={showCatalog:!1,token:""},n.onClickRegister=function(e,t){n.setState({showCatalog:e,token:t})},n.onClickSignIn=function(e,t){n.setState({showCatalog:e,token:t})},n.onClickSignOut=function(e,t){n.setState({showCatalog:e,token:""})},n.onClickViewCatalog=function(e){n.setState({showCatalog:e,token:""})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(w,{onClickButtonViewCatalog:this.onClickViewCatalog,onClickButtonRegister:this.onClickRegister,onClickButtonSignIn:this.onClickSignIn,onClickButtonSignOut:this.onClickSignOut}),this.state.showCatalog||this.state.token?r.a.createElement(y,{token:this.state.token}):null)}}]),t}(a.Component));i.a.render(r.a.createElement(C,null),document.getElementById("root"))}],[[11,2,1]]]);
//# sourceMappingURL=main.893aaeae.chunk.js.map
